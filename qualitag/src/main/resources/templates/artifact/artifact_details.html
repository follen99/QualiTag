<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <title>Project details</title>
  <link rel="stylesheet" href="/assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css?family=Inter:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800&amp;display=swap">
  <link rel="stylesheet" href="/assets/css/Team-Horizontal-icons.css">
  <link rel="stylesheet" href="/css/homepage/custom-button.css">
  <link rel="stylesheet" href="/assets/css/Team-Horizontal-images.css">
  <!--  <link rel="stylesheet" href="/css/project/styles.css">-->
  <!--  <link rel="stylesheet" href="/css/button-styles.css">-->

  <!--  librerie per la visualizzazione del codice con Highlight.js -->
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/atom-one-dark.min.css">
  <script
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
  <script
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/javascript.min.js"></script>
  <script
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/java.min.js"></script>

  <!--  button css-->
  <link rel="stylesheet" href="/css/button-styles.css">


  <!-- script to reuse the navbar -->
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <title>Artifact Detail</title>

  <!-- Token validation -->
  <script src="/js/auth/token-validation.js"></script>

  <style>
    .card {
      background-color: #634760;
      border-radius: 15px;
      padding: 20px;
      width: 300px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      color: white;
      text-align: center;
    }

    .title {
      font-size: 20px;
      font-weight: bold;
      margin-bottom: 10px;
    }

    .subtitle {
      font-size: 14px;
      color: rgba(255, 255, 255, 0.7);
      margin-bottom: 20px;
    }

    .slider {
      position: relative;
      width: 100%;
      height: 10px;
      background-color: rgba(255, 255, 255, 0.3);
      border-radius: 5px;
      overflow: hidden;
    }

    .slider-bar {
      position: absolute;
      height: 100%;
      width: 50%;
      background-color: transparent;
      transition: all 0.3s ease;
      border-radius: 5px; /* Arrotonda i bordi esterni */
    }

    /* Arrotonda solo il bordo destro per la barra verde (irr > 0) */
    .slider-bar[style*="green"] {
      border-top-right-radius: 5px;
      border-bottom-right-radius: 5px;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }

    /* Arrotonda solo il bordo sinistro per la barra rossa (irr < 0) */
    .slider-bar[style*="red"] {
      border-top-left-radius: 5px;
      border-bottom-left-radius: 5px;
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }

    .slider-center {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      width: 10px;
      height: 10px;
      background-color: orange;
      border-radius: 50%;
      opacity: 0; /* Nascondi di default */
      transition: opacity 0.3s ease;
    }

    .slider-center.visible {
      opacity: 1; /* Mostra solo quando necessario */
    }

    .irr-value {
      margin-top: 10px;
      font-size: 16px;
    }
  </style>

</head>
<body>
<!-- NAV BAR: THIS IS THE SAME FOR ALL THE VIEWS -->
<div id="nav-placeholder"></div>
<script>
  $(function () {
    // Carica dinamicamente il contenuto
    $("#nav-placeholder").load("/html/nav.html", function () {
      // Il contenuto è stato caricato, ora esegui il codice JavaScript
      const navBarEvent = new Event('navbarLoaded');
      console.log("navbar event dispatched");
      document.dispatchEvent(navBarEvent);

      // A questo punto, il codice JavaScript che dipende dal contenuto della navbar può essere eseguito
      // Esegui eventuali altre operazioni JavaScript per la navbar qui
    });
  });
</script>
<!--end of Navigation bar-->

<section class="py-5">
  <div class="w-auto p-3">
    <div class="row mb-4 mb-lg-5">
      <div class="row">
        <div class="col-md-8 col-xl-6 text-center mx-auto">
          <h2 class="fw-bold">Tagging the artifact</h2>
        </div>
      </div>
    </div>
    <div class="row d-flex justify-content-center">
      <div class="col-md-12 col-xl-12 d-flex justify-content-center">

        <div class="container-fluid" style="margin-left: 2em; margin-right: 2em">
          <div class="row">
            <div class="col-md-9">
              <!-- contenitore per artefatto-->
              <div id="artifact-container"></div>

              <div class="container-fluid d-flex justify-content-center">
                <!-- Contenitore per IRR -->
                <div class="card" style="margin-top: 2em">
                  <div class="title">Team inter-rater agreement</div>
                  <div class="subtitle">Calculated using Krippendorff's Alpha.</div>
                  <div id="irr-container">
                    <div class="slider">
                      <div class="slider-bar"></div>
                      <div class="slider-center"></div>
                    </div>
                    <div class="irr-value">IRR: <span id="irr-value">0.00</span></div>
                  </div>
                </div>
              </div>


            </div>
            <div class="col-md-3 mx-auto">
              <div id="sidebar-container" class="d-flex flex-column align-items-center">
                <!-- Lista dei tag selezionati -->
                <div id="selectedTags" class="mt-3">
                  <!-- I tag selezionati verranno visualizzati qui -->
                  <textarea id="tagInput" class="form-control mt-3" rows="3"
                            placeholder="You can add multiple tags at once separating every tag by a comma..."></textarea>
                </div>


                <div class="container-fluid">
                  <div class="row">
                    <div class="col">

                      <!-- Dropdown per selezionare i tag esistenti -->
                      <div class="dropdown">
                        <button class="common-button-size button-custom dropdown-toggle me-1 mt-2"
                                type="button" id="tagDropdown"
                                data-bs-toggle="dropdown" aria-expanded="false">
                          Previous tags...
                        </button>
                        <ul class="adaptive-dropdown-menu dropdown-menu" aria-labelledby="tagDropdown"
                            id="tagList">
                          <!-- I tag verranno caricati dinamicamente qui -->
                        </ul>
                      </div>
                    </div>

                    <div class="col">
                      <button type="button"
                              class="btn btn-danger common-button-size mt-2 ms-1"
                              style="display: flex; align-items: center; justify-content: center;"
                              id="clearTextAreaButton">
                        Clear
                      </button>
                    </div>
                  </div>
                </div>


                <!-- Pulsante per confermare i tag selezionati -->
                <button class="btn btn-primary mt-3" id="confirmTagsButton">Confirm</button>


                <!-- container for all the tags (owner) -->
                <div id="tags-container" class="mt-3" style="margin-top: 2em"></div>

                <!-- Lista dei tag confermati -->
                <ul id="existingTagsList" class="mt-3"></ul>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>

<!-- accrocchio per passare il projectId senza fare un'altra chiamata -->
  <div id="ownerUsernameContainer" th:text="${ownerUsername} " style="display: none;"></div>
</section>

<script th:inline="javascript" src="/js/artifact/artifact-details.js"></script>
<!--<script th:inline="javascript">
  const projectId = /*[[${projectId}]]*/ "";
  console.log("projectId: " + projectId);
</script>-->

<script type="module" src="/js/navbar/nav-bar-logic.js"></script>
<script src="/assets/bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/js/bold-and-dark.js"></script>

</body>
</html>